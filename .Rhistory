geom_bar(aes(y = ..density..,group = herkomstland)) +
facet_wrap(~herkomstland) +
opts(legend.position = "top") +
scale_y_continuous(labels = percent_format())
ggplot(immdat, aes(x=factor(ka13a109))) +
geom_bar(aes(y = ..density..,group = herkomstland)) +
facet_wrap(~herkomstland) +
scale_y_continuous(labels = percent_format())
gplot(immdat[c(!is.na(immdat$ka13a109)), ], aes(x=factor(ka13a109))) +
geom_bar(aes(y = ..density..,group = herkomstland)) +
facet_wrap(~herkomstland) +
scale_y_continuous(labels = percent_format())
ggplot(immdat[c(!is.na(immdat$ka13a109)), ], aes(x=factor(ka13a109))) +
geom_bar(aes(y = ..density..,group = herkomstland)) +
facet_wrap(~herkomstland) +
scale_y_continuous(labels = percent_format())
ggplot(immdat[c(!is.na(immdat$ka13a109),!is.na(immdat$herkomstland)), ], aes(x=factor(ka13a109))) +
geom_bar(aes(y = ..density..,group = herkomstland)) +
facet_wrap(~herkomstland) +
scale_y_continuous(labels = percent_format())
ggplot(immdat[!is.na(immdat$ka13a109) & !is.na(immdat$herkomstland), ], aes(x=factor(ka13a109))) +
geom_bar(aes(y = ..density..,group = herkomstland)) +
facet_wrap(~herkomstland) +
scale_y_continuous(labels = percent_format())
which( colnames(immdat)=="ka13a112" )
immdat[which( colnames(immdat)=="ka13a112" ):which( colnames(immdat)=="ka13a118" ),]
immdat[,which( colnames(immdat)=="ka13a112" ):which( colnames(immdat)=="ka13a118" )]
load("~/Dropbox/R_wav/data/climatetemperatures.RData")
temperature_by_year
load("~/Dropbox/R_wav/data/rbindexercises.RData")
View(futurepast)
View(immdat)
data <- read.table('http://www.ats.ucla.edu/stat/r/faq/hsb2.csv', header=T, sep=",")
head(data,5)
libray(reshape2)
library(reshape2)
melteddata <- melt(data,id.vars = data[,1:5])
melteddata <- melt(data,id.vars = names(data[,1:5]))
melteddata
head(melteddata,10)
melteddata <- melt(data,id.vars = names(data[,1:6]))
head(melteddata,10)
library(ggplot2)
ggplot(melteddata,aes(x=prog,y=value,colour=variable))+geom_line()
ggplot(melteddata,aes(x=prog,y=value,colour=variable))+geom_point()
ggplot(melteddata,aes(x=prog,y=value,colour=variable))+geom_boxplot()
ggplot(melteddata,aes(x=prog,y=value))+geom_boxplot()+facet_wrap(~variable)
melteddata <- melt(data,id.vars = names(data[,1:6]))
ggplot(melteddata,aes(x=prog,y=value))+geom_boxplot()+facet_wrap(~variable)
ggplot(melteddata,aes(x=prog,y=value,group=prog))+geom_boxplot()+facet_wrap(~variable)
?dcast
dcast(melteddata,formula = id+female+race+ses+schtyp+prog~variable)
backtowide <- dcast(melteddata,formula = id+female+race+ses+schtyp+prog~variable)
backtowide_byrace <- dcast(melteddata,formula = race~variable)
backtowide_byrace <- dcast(melteddata,formula = race~variable,fun.aggregate = mean)
backtowide_byrace
backtowide_byrace
backtowide_byrace
backtowide_byrace <- dcast(melteddata,formula = race+ses~variable,fun.aggregate = mean)
backtowide_byrace
backtowide_byrace <- dcast(melteddata,formula = race+ses~variable,fun.aggregate = mean)
backtowide_byraceses
backtowide_byraceses <- dcast(melteddata,formula = race+ses~variable,fun.aggregate = mean)
backtowide_byraceses
airquality
melteddata <- melt(data,id.vars = 1:6)
head(melteddata,10)
flights <- tbl_df(read.csv(url("https://cdn.rawgit.com/ylelkes/R_wav/master/data/flights.csv")))
install.packages("dplyr")
library(dplyr)
flights <- tbl_df(read.csv(url("https://cdn.rawgit.com/ylelkes/R_wav/master/data/flights.csv")))
flights <- tbl_df(read.csv(url("http://cdn.rawgit.com/ylelkes/R_wav/master/data/flights.csv")))
flights
morley
EuStockMarkets
head(EuStockMarkets)
melt(EuStockMarkets)
names(EuStockMarkets)
head(EuStockMarkets)
out <- melt(EuStockMarkets)
demo1 <- read.csv("http://www.ats.ucla.edu/stat/data/demo1.csv")
demo1
EuStockMarkets
out <- melt(EuStockMarkets)
out
EuStockMarkets
names(EuStockMarkets)
rownames(EuStockMarkets)
str(EuStockMarkets)
attr(EuStockMarkets,"tsp")
melted <- melt(EuStockMarkets)
names(melted)
melted$Var1
melted$Var2
ggplot(EuStockMarkets,aes(Var1,value,group=Var2))
ggplot(melted,aes(Var1,value,group=Var2))
ggplot(melted,aes(Var1,value,group=Var2))+geom_line()
euunemp <- tbl_df(read.csv(url("https://cdn.rawgit.com/ylelkes/R_wav/master/data/une_rt_a_1_Data.csv")))
euunemp <- (read.csv(url("https://cdn.rawgit.com/ylelkes/R_wav/master/data/une_rt_a_1_Data.csv")))
euunemp <- (read.csv(url("http://cdn.rawgit.com/ylelkes/R_wav/master/data/une_rt_a_1_Data.csv")))
euunemp$Value
euunemp$Value
datasets:airquality
datasets::airquality
mtcars[mtcars$cyl ==4, ]
mtcars[-1:4, ]
mtcars[-C(1,1:4), ]
mtcars[-C(1,1:4), ]
mtcars[-c(1,1:4), ]
mtcars[mtcars$cyl <= 5,]
mtcars[mtcars$cyl == 4 | 6, ]
mtcars[mtcars$cyl == 4 | mtcars$cyl == 6, ]
data(Ecdat::Caschool)
install.packages("Ecdat")
data(Ecdat::Caschool)
data(Ecdat::Stars)
data(Ecdat::stars)
data(Ecdat::Caschool)
library(Ecdat)
data(Caschool)
Caschool$readscr+Caschool$mathscr
Caschool$scores <- Caschool$readscr+Caschool$mathscr
Caschool$scores <- rowMeans(data.frame(Caschool$readscr,Caschool$mathscr))
names(Caschool)
names(Caschool) <- c(letters[1:18])
subset(Caschool,county=="Butte")
data(Caschool)
subset(Caschool,county=="Butte")
Caschool[Caschool$couty=="Butte",]
Caschool[,Caschool$couty=="Butte"]
Caschool[Caschool$county=="Butte"]
Caschool[Caschool$county=="Butte",]
Caschool$scores <- Caschool$readscr+Caschool$mathscr
ggplot(Caschool,aes(x=avginc,y=scores))+geom_point()
library(ggplot2)
ggplot(Caschool,aes(x=avginc,y=scores))+geom_point()
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous()
?scale_size_continuous
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(range=c(0,10))
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(range=c(0,1))
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(range=c(0,10,by=.25))
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(range=c(0,5))
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(range=c(0,10)
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_manual("Number of students in District")
?scale_size_manual
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+opts(legend.title="Town Name")
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+theme(legend.title="Town Name")
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+guide_legend(title = "Number of Students in a District")
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+guide_legend(title = "Number of Students in a District")
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"))
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=10))
max(Caschool$enrltot)
min(Caschool$enrltot)
27176/81
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=500))
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000))
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point(color="black")+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000))
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point(color="black")+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000),colour="black")
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm",color="blue")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000),colour="black")
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+geom_smooth(method="lm")+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000))
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000))
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point()+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000))+geom_smooth(method="lm")
ggplot(Caschool,aes(x=avginc,y=scores,size=enrltot))+geom_point(aes(size=enrltot))+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000))+geom_smooth(method="lm")
source('~/.active-rstudio-document', echo=TRUE)
ggplot(Caschool,aes(x=avginc,y=scores))+geom_point(aes(size=enrltot))+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000))+geom_smooth(method="lm")
ggplot(Caschool,aes(x=avginc,y=scores))+geom_point(aes(size=enrltot))+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000))+geom_smooth(method="lm")
ggplot(Caschool,aes(x=avginc,y=scores))+geom_point(aes(size=enrltot))+theme_bw()+xlab("Average Income")+ylab("Total Scores"))+geom_smooth(method="lm")
ggplot(Caschool,aes(x=avginc,y=scores))+geom_point(aes(size=enrltot))+theme_bw()+xlab("Average Income")+ylab("Total Scores")+geom_smooth(method="lm")
data(Caschool)
Caschool$enrltot
ggplot(Caschool,aes(x=avginc,y=scores))+geom_point(aes(size=enrltot))+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000))+geom_smooth(method="lm")
Caschool$scores <- rowMeans(data.frame(Caschool$readscr,Caschool$mathscr))
data(Caschool)
Caschool$scores <- rowMeans(data.frame(Caschool$readscr,Caschool$mathscr))
ggplot(Caschool,aes(x=avginc,y=scores))+geom_point(aes(size=enrltot))+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000))+geom_smooth(method="lm")
ggplot(Caschool,aes(x=avginc,y=scores))+geom_point(aes(size=enrltot,colour=enrltot))+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000))+geom_smooth(method="lm")
ggplot(Caschool,aes(x=avginc,y=scores))+geom_point(aes(size=enrltot))+theme_bw()+xlab("Average Income")+ylab("Total Scores")+scale_size_continuous(guide_legend(title = "Number of Students in a District"),breaks=seq(min(Caschool$enrltot),max(Caschool$enrltot),by=2000))+geom_smooth(method="lm")
plot(c(100, 250), c(300, 450), type = "n", xlab = "", ylab = "")
image <- as.raster(matrix(0:1, ncol = 5, nrow = 3))
rasterImage(image, 100, 300, 150, 350, interpolate = FALSE)
image
image[image=="#000000""]
image[image=="#000000"]
image[image=="#000000"]
image[image=="#000000"] = "#008000"
rasterImage(image, 100, 300, 150, 350, interpolate = FALSE)
lst <- list(mtcars,diamonds,mpg)
cor(lst[[3]])
cor(lst[[3]]$mpg)
lst[[3]]
names(lst[[3]])
cor(lst[[3]]cty,lst[[3]]$hwy)
cor(lst[[3]]$cty,lst[[3]]$hwy)
lst[[4] <- cor(lst[[3]]$cty,lst[[3]]$hwy)
lst[[4]] <- cor(lst[[3]]$cty,lst[[3]]$hwy)
lst[[2]]
names(lst[[2]])
subset(lst[[2]],carat>=1)
lst[[2]] <- subset(lst[[2]],carat>=1)
mtcars$cyl
car::recode(mtcars$cyl,"4='Four';6='Six';8='Eight'")
mtcars$cyl==4
mtcars[-1:-4,]
m1 <- mtcars[-1:-4,]
mtcars
dim(mtcars)
mtcars[-c(1:4), ]
mtcars[-1:-4, ]
names(mtcars[-1:-4, ])
dim(mtcars[-1:-4, ])
mtcars[-c(1:4), ]
dim(mtcars[-c(1:4), ])
dim(mtcars[-1:-4, ])
dim(mtcars[-(1:4), ])
5/6
list1 <- list(mtcars,diamonds,mpg)cor.mpg <- with(list1[[3]],cor(mpg[,c(8,9)], method= "pearson"))new.list <- c(list1, 0.95)
list1 <- list(mtcars,diamonds,mpg)cor.mpg <- with(list1[[3]],cor(mpg[,c(8,9)], method= "pearson"))
list1 <- list(mtcars,diamonds,mpg)
list1 <- list(mtcars,diamonds,mpg)
cor.mpg <- with(list1[[3]],cor(mpg[,c(8,9)], method= "pearson"))
new.list <- c(list1, 0.95)
list
new.list
ggplot(Caschool, aes(totalscore, avginc, size=enrltot, color=enrltot)) +
geom_jitter() +
geom_smooth(color = "#E69F00", alpha=.05) +
labs(title="Repartition of scores based on distric average income", x="Total scores math + english", y="Average income in county") +
theme(panel.background = element_rect(fill = "#f9f2e1"), panel.grid.major = element_line(color="#e7e7f6"))
library(ggplot2)
ggplot(Caschool, aes(totalscore, avginc, size=enrltot, color=enrltot)) +
geom_jitter() +
geom_smooth(color = "#E69F00", alpha=.05) +
labs(title="Repartition of scores based on distric average income", x="Total scores math + english", y="Average income in county") +
theme(panel.background = element_rect(fill = "#f9f2e1"), panel.grid.major = element_line(color="#e7e7f6"))
flights <- tbl_df(read.csv(url("https://cdn.rawgit.com/ylelkes/R_wav/master/data/flights.csv")))
library(dplyr)
flights <- tbl_df(read.csv(url("https://cdn.rawgit.com/ylelkes/R_wav/master/data/flights.csv")))
flights <- tbl_df(read.csv(url("http://cdn.rawgit.com/ylelkes/R_wav/master/data/flights.csv")))
head(df)
df <- data.frame(   color = c("blue", "black", "blue", "blue", "black"),    value = 1:5)
head(df)
flights <- tbl_df(read.csv(url("http://cdn.rawgit.com/ylelkes/R_wav/master/data/flights.csv")))
names(flights)
flights <- tbl_df(read.csv(url("http://cdn.rawgit.com/ylelkes/R_wav/master/data/flights.csv")))
flights <- tbl_df(read.csv("data/flights.csv"))
flights <- tbl_df(read.csv("~/Dropbox/R_wav/data/flights.csv"))
ggplot(flights,aes(dep_delay))+geom_histogram()
library(ggplot2)
ggplot(flights,aes(dep_delay))+geom_histogram()
fastestflights <- arrange(flights, desc(speed))
flights <- mutate(flights, speed = distance / (air_time/60))
flights <- tbl_df(read.csv("~/Dropbox/R_wav/data/flights.csv"))
names(flights)
library(dplyr)
flights <- tbl_df(read.csv("~/Dropbox/R_wav/data/flights.csv"))
names(flights)
mutate(df,double= 2* value,quadruple=2*double)
summarise(df,total=sum(value))
by_color <- group_by(df,color)
summarise(by_color,total=sum(value))
ggplot(flights,aes(dep_delay))+geom_histogram()
per_hour <- flights %>%
filter(cancelled == 0) %>%
mutate(time = hour + minute / 60) %>%
group_by(time) %>%
summarise(
arr_delay = mean(arr_delay, na.rm = TRUE),
n = n()
)
per_hour
qplot(time, arr_delay, data = per_hour)
library(slidify)
publish_dropbox()
load(EuStockMarkets)
data(EuStockMarkets)
head(EuStockMarkets)
data(EuStockMarkets)
melted <- melt(EuStockMarkets)
library(reshape2)
data(EuStockMarkets)
melted <- melt(EuStockMarkets)
head(melt)
head(melted)
head(melted)
data(airquality)
names(airquality)
melted <- melt(airquality,id.vars = c("Month","Day"))
head(melted)
subset(melted,Month==5 & Day==1)
dcast(melted,formula = Month~variable,fun.aggregate = mean)
dcast(melted,formula = Month~variable,fun.aggregate = mean,na.rm=T)
subset(melted,Month==5 & Day==1)
subset(melted,Month==5 & Day==2)
library(Hmisc)
df <- data.frame(   color = c("blue", "black", "blue", "blue", "black"),    value = 1:5)
head(df)
subset(df,colour=="blue")
subset(df,color=="blue")
df[c(1,3,4),]
select(flights,arr_delay,dep_delay)
select(flights,contains(-)
select(flights,contains(_)
select(flights,contains("_")
select(flights,contains("_"))
select(flights,contains("_"))
select(flights,arr_delay,dep_delay)
select(flights,contains("_"))
select(flights,contains("delay"))
select(flights,6,7)
select(flights,ends_with("delay"))
head(flights)
flights
arrange(flights,date,dep)
arrange(flights,date,dep)
arrange(flights,desc(arr_delay))
arrange(flights,desc(arr_delay+dep_delay))
arrange(flights,(arr_delay+dep_delay))
arrange(flights,(arr_delay))
arrange(flights,desc(arr_delay))
arrange(flights, desc(dep_delay - arr_delay))
df$double <- df$value*2
df
df
df <- data.frame(   color = c("blue", "black", "blue", "blue", "black"),    value = 1:5)
head(df)
df
mutate(df,double= 2* value,quadruple=2*double)
df
mutate(df,double= 2* value,quadruple=2*double) -> df
df
names(flights)
flights$time
mutate(flights,speed=distance/time)
flights$time
flights$time/60
mutate(flights,speed=dist/(time/60))
mutate(flights,speed=dist/(time*60))
View(mutate(flights,speed=dist/(time*60)))
View(mutate(flights,speed=dist/(time/60)))
arrange(mutate(flights,speed=dist/(time/60)),speed)
arrange(mutate(flights,speed=dist/(time/60)),desc(speed))
flights %>%
filter(!is.na(dep_delay)) %>%
group_by(date, hour) %>%
summarise(delay = mean(dep_delay), n = n()) %>%
filter(n > 10)
data <- haven::read_spss("~/Desktop/Goldman507/TESS163_Goldman_Client.sav")
data$Q17
table(data$Q17)
data$Q17[data$Q17==-1]=NA
data$Q18_2
data$Q18_2[data$Q18_2==-1]=NA
data$Q18_2
data$Q16
data$Q16[data$Q16==-1]=NA
data$Q17[data$Q17==-1]=NA
data$Q18_2[data$Q18_2==-1]=NA
data$Q2
data$Q2[data$Q2==-1]=NA
data$Q16[data$Q16==-1]=NA
data$Q17[data$Q17==-1]=NA
data$Q18_2[data$Q18_2==-1]=NA
data$Q19_2
table(data$Q19_2)
data$Q19_4[data$Q19_4==-1]=NA
data$Q19_4
table(data$Q19_4)
melted <- melt(data,measure.vars = c("Q2","Q16","Q17","Q18_2","Q19_4"))
melted$variable
melted$value
melted <- melt(data,measure.vars = c("Q2","Q16","Q17","Q18_2","Q19_4"))
melted <- melt(data,measure.vars = c("Q2","Q16","Q17","Q18_2"))
melted$XTESS163
melted %>% group_by(XTESS163,variable) %>% summarise(mean,na.rm=T)
melted %>% group_by(XTESS163,variable) %>% summarise(mean(value,na.rm=T))
melted$CaseID
data <- rio::import("~/Desktop/Goldman507/TESS163_Goldman_Client.sav")
melted <- melt(data,measure.vars = c("Q2","Q16","Q17","Q18_2"))
melted$CaseID
melted %>% group_by(XTESS163,variable) %>% summarise(mean(value,na.rm=T))
data <- foreign::read.spss("~/Desktop/Goldman507/TESS163_Goldman_Client.sav",to.data.frame=T)
data$Q2[data$Q2==-1]=NA
data$Q16[data$Q16==-1]=NA
data$Q17[data$Q17==-1]=NA
data$Q18_2[data$Q18_2==-1]=NA
data$Q19_4[data$Q19_4==-1]=NA
melted <- melt(data,measure.vars = c("Q2","Q16","Q17","Q18_2"))
melted %>% group_by(XTESS163,variable) %>% summarise(mean(value,na.rm=T))
melted %>% group_by(XTESS163) %>% summarise(mean(value,na.rm=T))
data$Q2[data$Q2==-1]=NA
data$Q16[data$Q16==-1]=NA
data$Q17[data$Q17==-1]=NA
data$Q18_2[data$Q18_2==-1]=NA
data$Q19_4[data$Q19_4==-1]=NA
select(data,Q2,Q16,Q17,Q18_2,Q19_4,XTESS163)
data <- rio::import("~/Desktop/Goldman507/TESS163_Goldman_Client.sav",to.data.frame=T)
data$Q2[data$Q2==-1]=NA
data$Q16[data$Q16==-1]=NA
data$Q17[data$Q17==-1]=NA
data$Q18_2[data$Q18_2==-1]=NA
data$Q19_4[data$Q19_4==-1]=NA
select(data,Q2,Q16,Q17,Q18_2,Q19_4,XTESS163)
selected <- select(data,Q2,Q16,Q17,Q18_2,Q19_4,XTESS163)
melted <- melt(data,measure.vars = c("Q2","Q16","Q17","Q18_2"))
melted
melted
names(melted)
melted <- melt(selected,measure.vars = c("Q2","Q16","Q17","Q18_2"))
names(melted)
data$HETEROSEXUAL1
data$HETEROSEXUAL2
library(devtools)
devtools::install_github(repo = "staTeX",username = "SachaEpskamp")
library(staTeX)
data$XTESS163
car::recode(data$XTESS163,"1:4='Straight';5:7='Gay'")
data$gayorstraight <- car::recode(data$XTESS163,"1:4='Straight';5:7='Gay'")
t.test(Q19_4~gayorstraight,data)
data$XTESS163
data$gayorstraight
data$gayorstraight <- as.factor(car::recode(data$XTESS163,"1:4='Straight';5:7='Gay'"))
data$gayorstraight
t.test(Q19_4~gayorstraight,data)
data$gayorstraight
levels(data$gayorstraight)
levels(data$Q19_4)
data$Q19_4
t.test(Q16~gayorstraight,data)
t.test(Q2~gayorstraight,data)
out <- t.test(Q2~gayorstraight,data)
st(out)
st(out)
melted %>% group_by(XTESS163,variable) %>% summarise(mean(value,na.rm=T))
data$gayorstraight <- as.factor(car::recode(data$XTESS163,"1:4='Straight';5:7='Gay'"))
out <- t.test(Q2~gayorstraight,data)
out <- aov(Q2~gayorstraight*XTESS163,data)
summary(out)
out <- aov(Q2~gayorstraight*as.factor(XTESS163),data)
summary(out)
dcast(data,gayorsraight~Q2)
dcast(data,gayorstraight~Q2)
data %>% group_by(gayorstraight,condition) %>% summarise(value=mean(Q2))
out <- select(data,gayorstraight,condition,Q2)
out <- select(data,gayorstraight,data$XTESS163,Q2)
data %>% group_by(gayorstraight,XTESS163) %>% summarise(value=mean(Q2))
out %>% group_by(gayorstraight,XTESS163) %>% summarise(value=mean(Q2))
out <- select(data,gayorstraight,XTESS163,Q2)
out %>% group_by(gayorstraight,XTESS163) %>% summarise(value=mean(Q2))
out <- select(data,gayorstraight,as.factor(XTESS163),Q2)
data$XTESS163
as.factor(data$XTESS163)
data$XTESS163 <- as.factor(data$XTESS163)
out <- select(data,gayorstraight,XTESS163,Q2)
out %>% group_by(gayorstraight,XTESS163) %>% summarise(value=mean(Q2))
data <- foreign::read.spss("~/Desktop/Goldman507/TESS163_Goldman_Client.sav",to.data.frame=T)
data$XTESS163 <- as.factor(data$XTESS163)
out <- select(data,gayorstraight,XTESS163,Q2)
data$gayorstraight <- as.factor(car::recode(data$XTESS163,"1:4='Straight';5:7='Gay'"))
out %>% group_by(gayorstraight,XTESS163) %>% summarise(value=mean(Q2))
out <- select(data,gayorstraight,XTESS163,Q2)
out %>% group_by(gayorstraight,XTESS163) %>% summarise(value=mean(Q2))
out %>% group_by(gayorstraight,XTESS163) %>% summarise(value=mean(Q2)) -> R
R
view(R)
View(R)
data$XTESS163
data$gayorstraight <- as.factor(car::recode(data$XTESS163,"1:4='Straight';5:7='Gay'"))
data$XTESS163 <- as.factor(data$XTESS163)
data$XTESS163
table(data$XTESS163)
data$gayorstraight <- as.factor(car::recode(data$XTESS163,"1:4='Straight';5:7='Gay'"))
data$gayorstraight <- as.factor(car::recode(data$XTESS163,"2='Hero';6='Hero';3='Victim';7='Victim'")"
data$gayorstraight <- as.factor(car::recode(data$XTESS163,"1:4='Straight';5:7='Gay'"))
data$storytype <- as.factor(car::recode(data$XTESS163,"2='Hero';6='Hero';3='Victim';7='Victim'")"
data$storytype <- as.factor(car::recode(data$XTESS163,"2='Hero';6='Hero';3='Victim';7='Victim'")
data$gayorstraight <- as.factor(car::recode(data$XTESS163,"1:4='Straight';5:7='Gay'"))
data$storytype <- as.factor(car::recode(data$XTESS163,"2='Hero';6='Hero';3='Victim';7='Victim'"))
data %>% group_by(gayorstraight,storytype) %>% summarise(value=mean(Q2)) -> R
out <- select(data,gayorstraight,storytype,Q2)
out %>% group_by(gayorstraight,storytype) %>% summarise(value=mean(Q2)) -> R
R
View(R)
data$storytype <- as.factor(car::recode(data$XTESS163,"2='Hero';6='Hero';3='Victim';7='Victim';else=NA"))
out <- select(data,gayorstraight,storytype,Q2)
out %>% group_by(gayorstraight,storytype) %>% summarise(value=mean(Q2)) -> R
View(R)
data$gayorstraight
data$gayorstraight <- as.factor(car::recode(as.numeric(data$XTESS163),"1:4='Straight';5:7='Gay'"))
data$storytype <- as.factor(car::recode(as.numeric(data$XTESS163),"2='Hero';6='Hero';3='Victim';7='Victim';else=NA"))
out <- select(data,gayorstraight,storytype,Q2)
out %>% group_by(gayorstraight,storytype) %>% summarise(value=mean(Q2)) -> R
View(R)
View(R)
View(R)
dcast(R,gayorstraight~storytype)
out %>% group_by(gayorstraight,storytype) %>% summarise(value=mean(Q2),sd=sd(Q2)) -> R
dcast(R,gayorstraight~storytype)
R
dcast(R,gayorstraight~storytype+sd)
dcast(R,gayorstraight~storytype)
aov(Q2~gayorstraight*storytype,data)
aov(as.numeric(Q2)~gayorstraight*storytype,data)
summary(aov(as.numeric(Q2)~gayorstraight*storytype,data)
)
st(aov(as.numeric(Q2)~gayorstraight*storytype,data))
st(aov(as.numeric(Q2)~gayorstraight*storytype,data)[1])
st(aov(as.numeric(Q2)~gayorstraight*storytype,data))[1]
