---
title       : Markdown, Getting Data into Shape
subtitle    : 
author      : 
job         : 
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : []            # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
---

## Markdown

* Markdown is an easy way to combine data and writing for html and pdf reports. 
* All the slides in this class and the github page were written in markdown.
* Rstudio is awesome because it has been developed to generate markdown reports. 
* I would like you to start submitting your problem sets in markdown. 
* First thing that needs to be done is install knitr. 


---
## Some markdown exercises

1. Create a new markdown document. 
2. Create a ggplot graph with a regression line using the ToothGrowth datalength (Guinea Pigs tooth lengs for different doses of either vitamin c or orange juice and doses), with different facets for type of supplement.
, plotting a different facet for each diet. Add it to your markdown document and give it a width of 4 inches and a height of 4 inches. Don't show any of the code. 
3. Next, run three regressions, the first regresses length on dose for the guinea pigs in the VC condition, the second regresses length on dose for the OJ condition, the third looks at the interaction between supp and dose on length. 
4. Use the htmlreg function in the texreg package to create a table of these three regressionn models (in one table). Give the columns new names and a nice caption. HINT: you'll have to change the result command within the chunk to make this work.
5. You're writing up your results, and want to report the interaction effect from the third model. Write a sentence that reports the b coefficient and standard error from that model. HINT: use summary(modelname)$coefficients to get the matrix.

---
## Getting data into shape

1. Ran 10 experiments, now want to do a meta-analysis. 
2. I want to match my country level data with my individual-level data.
3. I have time series data that looks like this:

```{r,echo=FALSE}
x <- read.table(textConnection(
"Code Country        1950    1951    1952    1953    1954
AFG  Afghanistan    20,249  21,352  22,532  23,557  24,555
ALB  Albania        8,097   8,986   10,058  11,123  12,246"), header=TRUE)
head(x)
```

4. I want it to look like this:

```{r,echo=FALSE,warning=F,message=F}
library(reshape2)
head(melt(x,id.vars = c("Code","Country")))
```

---
## Stacking dataframes with rbind

1. Try the following:
```
load(url("https://cdn.rawgit.com/ylelkes/R_wav/master/data/rbindexercises.RData"))
```

2. First, use colnames to look at the names of df1,df2,df3.
3. use rbind to stack df1, df2, and df3 into one dataframe. 
4. Now try to add df4 to the stacked dataframe. How do we fix it?
5. Now add df5. Doesn't work? Try plyr::rbind.fill
6. What does the variables third and fourth look like for the df1:df4?

```{r}
df1 <- data.frame(gender=sample(rep(c("Male","Female"),100),size = 1000,replace = T),race=sample(rep(c("Black","White","Asian"),100),size = 1000,replace = T),score=rnorm(1:1000))
df2 <- data.frame(gender=sample(rep(c("Male","Female"),100),size = 200,replace = T),race=sample(rep(c("Black","White","Asian"),100),size = 200,replace = T),score=rnorm(1:200))
df3 <- data.frame(race=sample(rep(c("Black","White","Asian"),100),size = 300,replace = T),score=rnorm(1:300),gender=sample(rep(c("Male","Female"),100),size = 300,replace = T))
df4 <- data.frame(sex=sample(rep(c("Male","Female"),100),size = 100,replace = T),Race=sample(rep(c("Black","White","Asian"),100),size = 100,replace = T),score=rnorm(1:100))
df5 <- data.frame(gender=sample(rep(c("Male","Female"),100),size = 100,replace = T),race=sample(rep(c("Black","White","Asian"),100),size = 100,replace = T),third=rnorm(1:100),fourth=rnorm(1:100))
rbind(df1,df2,df3,df5)
save(list = c("df1","df2","df3","df4","df5"),file="../data/rbindexercises.RData")
library(plyr)
```


